<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="ร้านค้าสโมสรนักศึกษาวิทยาลัยการคอมพิวเตอร์ จำหน่ายเสื้อโปโล เสื้อแจ็คเก็ต และอุปกรณ์ต่างๆ">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai:wght@100;200;300;400;500;600;700&family=Prompt:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Sarabun:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap"
        rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
        crossorigin="anonymous"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <title>CPSHOP - สโมสรนักศึกษาวิทยาลัยการคอมพิวเตอร์</title>
    <link rel="icon" type="image/x-icon" href="./image/SMOLOGO.webp">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: #30319D;">
        <div class="container">
            <a class="navbar-brand fw-bold d-flex align-items-center" href="/">
                <img src="./image/SMOLOGO.webp" alt="SMOCP Logo" width="30" height="30" class="me-2">
                SMOCP
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <!-- เมนูลิงก์ -->
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="/">หน้าหลัก</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="">ปฏิทินกิจกรรม</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="">บริการสำหรับนักศึกษา</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="/shop">ร้านค้าสโมสร</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/tracking">ติดตามสินค้า</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link"
                            href="https://www.facebook.com/profile.php?id=100083108863117&mibextid=wwXIfr&rdid=SjHPRnXMQKJ5FEDh&share_url=https%3A%2F%2Fwww.facebook.com%2Fshare%2F1BUay9x1MG%2F%3Fmibextid%3DwwXIfr"
                            target="_blank" rel="noopener noreferrer">
                            <i class="fab fa-facebook"></i> Facebook
                        </a>
                    </li>
                </ul>

                <!-- ช่องค้นหาและตะกร้าสินค้า -->
                <form class="d-flex me-3" role="search"
                    onsubmit="event.preventDefault(); alert('ค้นหา: ' + this.querySelector('input').value);">
                    <input class="form-control form-control-sm me-2" type="search" placeholder="ค้นหา"
                        aria-label="Search">
                    <button class="btn btn-outline-light btn-sm" type="submit"><i class="fas fa-search"></i></button>
                </form>

                <!-- <a href="#cart" class="btn btn-outline-light position-relative" aria-label="ตะกร้าสินค้า">
                    <i class="fas fa-shopping-cart fa-lg"></i>
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                        style="font-size: 0.7rem;">
                        3 
                        <span class="visually-hidden">สินค้าคงเหลือในตะกร้า</span>
                    </span>
                </a> -->
            </div>
        </div>
    </nav>
    <div class="card mb-4 shadow-sm border-0">
        <img src="./image/bg.webp" class="img-fluid w-100" alt="CP SHOP Banner"
            style="max-height: 300px; object-fit: cover;">
    </div>
    <div class="container py-4">
        <hr class="mb-5">
        <div style="font-size: 32px; font-weight: 500; color: #30319D;" class="mt5 mb-4">
            <i class="fa-solid fa-store"> </i><span>ร้านค้าสโมสร</span>
        </div>
        <div id="success-section" style="display: none;">
            <div class="card shadow-sm">
                <div class="card-body p-5 text-center">
                    <div class="display-1 text-success mb-4">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h2 class="mb-3 fw-bold">สั่งซื้อสำเร็จ!</h2>
                    <p class="lead mb-4">ขอบคุณสำหรับการสั่งซื้อ หากไม่ได้รับอีเมลยืนยันคำสั่งซื้อ กรุณาติดต่อเพจ
                        Facebook โดยด่วน</p>

                    <div class="card bg-light mb-4">
                        <div class="card-body p-4 text-start">
                            <h4 class="mb-3 text-primary">สรุปการสั่งซื้อ</h4>
                            <div id="order-summary-display">

                                <p><strong>หมายเลขอ้างอิง:</strong> 123456789</p>
                                <p><strong>วันที่:</strong> 1 ตุลาคม 2565</p>
                                <p><strong>ยอดรวม:</strong> 1,000 บาท</p>
                            </div>
                        </div>
                    </div>

                    <div class="card bg-light mb-4">
                        <div class="card-body p-4 text-start">
                            <h4 class="mb-3 text-primary"><i class="fas fa-lightbulb me-2"></i> คำแนะนำ:</h4>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item bg-transparent border-0 ps-0">
                                    <i class="fas fa-save text-primary me-2"></i> โปรดแคปหน้าจอ/สลิปการโอนเงินไว้
                                </li>
                                <li class="list-group-item bg-transparent border-0 ps-0">
                                    <i class="fas fa-phone text-primary me-2"></i>
                                    หากมีปัญหาสามารถติดต่อสโมสรนักศึกษาได้
                                </li>
                                <li class="list-group-item bg-transparent border-0 ps-0">
                                    <i class="fas fa-truck text-primary me-2"></i> สินค้าจะถูกจัดส่งภายใน 15-45
                                    วันหลังจากปิดพรีออเดอร์
                                </li>
                                <li class="list-group-item bg-transparent border-0 ps-0">
                                    <i class="fas fa-envelope text-primary me-2"></i>
                                    กรุณาตรวจสอบอีเมลยืนยันการสั่งซื้อในกล่องจดหมายของคุณ
                                    หากไม่ได้รับอีเมลยืนยันคำสั่งซื้อ กรุณาติดต่อเพจ Facebook โดยด่วน
                                </li>
                            </ul>
                        </div>
                    </div>

                    <button class="btn btn-primary btn-lg py-3 px-5" onclick="resetOrder()">สั่งซื้อใหม่</button>
                </div>
            </div>
        </div>
        <div class="mb-4 ">
            <div class="btn-group" id="product-btn" role="group">
                <button class="btn btn-primary" onclick="filterProducts('all', this)">สินค้าทั้งหมด</button>
                <button class="btn btn-outline-primary"
                    onclick="filterProducts('individual', this)">สินค้าแยกชิ้น</button>
            </div>
        </div>

        <!-- Packages Section -->
        <div id="shopping-section">
            <div class="row g-4">
                <!-- Individual Items Package -->
                <div class="col-md-6 col-lg-4">
                    <div class="card rounded-4 overflow-hidden shadow-sm position-relative package-card"
                        data-package="individual">

                        <!-- ✅ ป้าย PRE-ORDER ต้องอยู่ตรงนี้ -->
                        <div class="position-absolute bg-primary text-white px-2 py-1 rounded-end"
                            style="top: 10px; left: 0; z-index: 10;">
                            PRE-ORDER
                        </div>

                        <!-- ✅ Carousel อยู่ข้างล่างป้าย -->
                        <div id="carouselIndividual" class="carousel slide" data-bs-ride="carousel">
                            <div class="carousel-inner rounded-top">
                                <div class="carousel-item active">
                                    <img src="./image/belts.webp" class="d-block w-100" alt="รูปที่ 1"
                                        style="height: 100%; object-fit: cover;">
                                </div>
                                <div class="carousel-item">
                                    <img src="./image/jack.webp" class="d-block w-100" alt="รูปที่ 2"
                                        style="height: 100%; object-fit: cover;">
                                </div>
                                <div class="carousel-item">
                                    <img src="./image/shrt.webp" class="d-block w-100" alt="รูปที่ 3"
                                        style="height: 100%; object-fit: cover;">
                                </div>
                                <div class="carousel-item">
                                    <img src="./image/tt.webp" class="d-block w-100" alt="รูปที่ 4"
                                        style="height: 100%; object-fit: cover;">
                                </div>
                                <div class="carousel-item">
                                    <img src="./image/tie.webp" class="d-block w-100" alt="รูปที่ 5"
                                        style="height: 100%; object-fit: cover;">
                                </div>
                            </div>
                        </div>

                        <!-- Card Body -->
                        <div class="card-body p-3">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <div class="form-check">
                                    <input type="radio" name="package" value="individual" class="form-check-input me-2"
                                        id="radio-individual">
                                    <label class="form-check-label card-title fw-bold mb-0 stretched-link"
                                        for="radio-individual">ซื้อแยกชิ้น</label>
                                </div>
                            </div>
                            <div class="d-flex align-items-center mb-2">
                                <span class="text-muted me-2">รายการสินค้า</span>
                                <div class="text-warning me-1"><i class="fas fa-star"></i></div>
                                <span class="fw-bold">ราคาแยกชิ้น</span>
                            </div>
                            <p class="card-text text-muted small mb-3">
                                เลือกซื้อสินค้าได้ตามต้องการ - เสื้อโปโล (359฿), เสื้อแจ็คเก็ต (790฿), เสื้อ JERSEY
                                (259฿), หัวเข็มขัด
                                (129฿), ที่หนีบเนคไท (119฿)
                            </p>
                            <div class="fw-bold text-primary fs-5">เลือกได้ตามต้องการ</div>
                        </div>
                    </div>
                </div>



            </div>


            <!-- Selection Details (ยังคงเหมือนเดิม) -->
            <div id="selection-details" class="mt-4" style="display: none;">
                <div class="card shadow-sm">
                    <div class="card-body p-4">
                        <h3 class="mb-4 text-primary">รายละเอียดการสั่งซื้อ</h3>

                        <!-- แจ้งเตือนข้อจำกัด -->
                        <div class="alert alert-info mb-3">
                            <i class="fas fa-info-circle me-2"></i>
                            <strong>ข้อจำกัดการสั่งซื้อ:</strong> คำสั่งซื้อหนึ่งครั้งสั่งได้ไม่เกิน 3 ชิ้น
                        </div>

                        <!-- แจ้งเตือนข้อจำกัดเสื้อ -->
                        <div class="alert alert-warning mb-4">
                            <i class="fas fa-tshirt me-2"></i>
                            <strong>ข้อจำกัดเสื้อ:</strong> เสื้อทุกประเภท (โปโล + แจ็คเก็ต + เจอร์ซี่)
                            รวมกันสั่งได้ไม่เกิน 3 ชิ้น
                            <div class="mt-2">
                                <span class="me-2">จำนวนเสื้อที่เลือก:</span>
                                <span id="shirt-counter" class="badge bg-secondary fs-6">
                                    <span id="shirt-count">0</span>/3 ชิ้น
                                </span>
                            </div>
                        </div>

                        <hr>
                        <a href="/size" class=" text-primary">ดูตารางไซต์เสื้อ</a>

                        <div id="quantity-section" class="mb-4 mt-4">

                            <label class="form-label fw-bold">จำนวนแพ็คเก็ต:</label>
                            <div class="input-group" style="max-width: 200px;">
                                <button class="btn btn-outline-primary" type="button"
                                    onclick="changeQuantity(-1)">-</button>
                                <input type="number" id="quantity" class="form-control text-center" value="1" min="1"
                                    disabled onchange="updateTotal()">
                                <button class="btn btn-outline-primary" type="button"
                                    onclick="changeQuantity(1)">+</button>
                            </div>
                        </div>

                        <!-- Individual Items Selection -->
                        <div id="individual-items-selection" class="card bg-light p-3 mb-4" style="display: none;">
                            <h4 class="mb-4 text-primary">เลือกสินค้าที่ต้องการ</h4>
                            <div class="row row-cols-1 row-cols-md-3 g-4">

                                <!-- เสื้อโปโล -->
                                <div class="col">
                                    <div class="card h-100 shadow-sm border-0">
                                        <img src="./image/shrt.webp" class="card-img-top " alt="เสื้อโปโล"
                                            style="object-fit: cover; height: 100%;">
                                        <div class="card-body">
                                            <h5 class="card-title">เสื้อโปโล</h5>
                                            <p class="card-text text-danger fw-bold">ราคา 359 บาท</p>
                                            <select id="polo-select" class="form-select"
                                                onchange="updateIndividualItems()">
                                                <option value="0">ไม่เลือก</option>
                                                <option value="1">1 ชิ้น</option>
                                                <option value="2">2 ชิ้น</option>
                                                <option value="3">3 ชิ้น</option>

                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <!-- เสื้อแจ็คเก็ต -->
                                <div class="col">
                                    <div class="card h-100 shadow-sm border-0">
                                        <img src="./image/jack.webp" class="card-img-top" alt="เสื้อแจ็คเก็ต"
                                            style="object-fit: cover; height: 100%;">
                                        <div class="card-body">
                                            <h5 class="card-title">เสื้อแจ็คเก็ต</h5>
                                            <p class="card-text text-danger fw-bold">ราคา 790 บาท</p>
                                            <select id="jacket-select" class="form-select"
                                                onchange="updateIndividualItems()">
                                                <option value="0">ไม่เลือก</option>
                                                <option value="1">1 ชิ้น</option>
                                                <option value="2">2 ชิ้น</option>
                                                <option value="3">3 ชิ้น</option>

                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <!-- เสื้อ JERSEY -->
                                <div class="col">
                                    <div class="card h-100 shadow-sm border-0">
                                        <img src="./image/jersy.png" class="card-img-top" alt="เสื้อ JERSEY"
                                            style="object-fit: cover; height: 100%;">
                                        <div class="card-body">
                                            <h5 class="card-title">เสื้อ JERSEY</h5>
                                            <p class="card-text text-danger fw-bold">ราคา 259 บาท</p>
                                            <select id="jersey-select" class="form-select"
                                                onchange="updateIndividualItems()">
                                                <option value="0">ไม่เลือก</option>
                                                <option value="1">1 ชิ้น</option>
                                                <option value="2">2 ชิ้น</option>
                                                <option value="3">3 ชิ้น</option>

                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <!-- หัวเข็มขัด -->
                                <div class="col">
                                    <div class="card h-100 shadow-sm border-0">
                                        <img src="./image/belts.webp" class="card-img-top" alt="หัวเข็มขัด"
                                            style="object-fit: cover; height: 100%;">
                                        <div class="card-body">
                                            <h5 class="card-title">หัวเข็มขัด</h5>
                                            <p class="card-text text-danger fw-bold">ราคา 129 บาท</p>
                                            <select id="belt-select" class="form-select"
                                                onchange="updateIndividualItems()">
                                                <option value="0">ไม่เลือก</option>
                                                <option value="1">1 ชิ้น</option>
                                                <option value="2">2 ชิ้น</option>
                                                <option value="3">3 ชิ้น</option>

                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <!-- ตุ้งติ้ง - ปิดการขาย -->
                                <div class="col">
                                    <div class="card h-100 shadow-sm border-0 position-relative" style="opacity: 0.6;">
                                        <!-- ป้ายปิดการขาย -->
                                        <div class="position-absolute bg-danger text-white px-2 py-1 rounded"
                                            style="top: 10px; right: 10px; z-index: 10; font-size: 0.8rem;">
                                            ปิดการขาย
                                        </div>
                                        <img src="./image/tt.webp" class="card-img-top" alt="ตุ้งติ้ง"
                                            style="object-fit: cover; height: 100%;">
                                        <div class="card-body">
                                            <h5 class="card-title text-muted">ตุ้งติ้ง</h5>
                                            <p class="card-text text-muted fw-bold">ราคา 119 บาท</p>
                                            <select id="tung-select" class="form-select" disabled
                                                onchange="updateIndividualItems()">
                                                <option value="0">ปิดการขาย</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <!-- ที่หนีบเนคไท -->
                                <div class="col">
                                    <div class="card h-100 shadow-sm border-0">
                                        <img src="./image/tie.webp" class="card-img-top" alt="ที่หนีบเนคไท"
                                            style="object-fit: cover; height: 100%;">
                                        <div class="card-body">
                                            <h5 class="card-title">ที่หนีบเนคไท</h5>
                                            <p class="card-text text-danger fw-bold">ราคา 119 บาท</p>
                                            <select id="tie-select" class="form-select"
                                                onchange="updateIndividualItems()">
                                                <option value="0">ไม่เลือก</option>
                                                <option value="1">1 ชิ้น</option>
                                                <option value="2">2 ชิ้น</option>
                                                <option value="3">3 ชิ้น</option>

                                            </select>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <!-- Size selections -->
                        <div id="polo-sizes-container" class="mb-4"></div>
                        <div id="jacket-sizes-container" class="mb-4"></div>
                        <div id="jersey-sizes-container" class="mb-4"></div>

                        <!-- Single size selections -->
                        <div id="polo-size-section" class="mb-4" style="display: none;">
                            <label class="form-label fw-bold">ไซส์เสื้อโปโล:</label>
                            <div class="row row-cols-2 row-cols-sm-3 row-cols-md-6 g-3">
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="SSS"
                                        onclick="selectSize('polo', 'SSS')">SSS</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="SS"
                                        onclick="selectSize('polo', 'SS')">SS</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="S"
                                        onclick="selectSize('polo', 'S')">S</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="M"
                                        onclick="selectSize('polo', 'M')">M</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="L"
                                        onclick="selectSize('polo', 'L')">L</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="XL"
                                        onclick="selectSize('polo', 'XL')">XL</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="XXL"
                                        onclick="selectSize('polo', 'XXL')">XXL</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="3XL"
                                        onclick="selectSize('polo', '3XL')">3XL</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="4XL"
                                        onclick="selectSize('polo', '4XL')">4XL</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="5XL"
                                        onclick="selectSize('polo', '5XL')">5XL</button>
                                </div>
                            </div>
                        </div>

                        <div id="jacket-size-section" class="mb-4" style="display: none;">
                            <label class="form-label fw-bold">ไซส์เสื้อแจ็คเก็ต:</label>
                            <div class="row row-cols-2 row-cols-sm-3 row-cols-md-6 g-3">
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="SSS"
                                        onclick="selectSize('jacket', 'SSS')">SSS</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="SS"
                                        onclick="selectSize('jacket', 'SS')">SS</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="S"
                                        onclick="selectSize('jacket', 'S')">S</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="M"
                                        onclick="selectSize('jacket', 'M')">M</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="L"
                                        onclick="selectSize('jacket', 'L')">L</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="XL"
                                        onclick="selectSize('jacket', 'XL')">XL</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="XXL"
                                        onclick="selectSize('jacket', 'XXL')">XXL</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="3XL"
                                        onclick="selectSize('jacket', '3XL')">3XL</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="4XL"
                                        onclick="selectSize('jacket', '4XL')">4XL</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="5XL"
                                        onclick="selectSize('jacket', '5XL')">5XL</button>
                                </div>
                            </div>
                        </div>

                        <div id="jersey-size-section" class="mb-4" style="display: none;">
                            <label class="form-label fw-bold">ไซส์เสื้อ JERSEY:</label>
                            <div class="row row-cols-2 row-cols-sm-3 row-cols-md-6 g-3">
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="SSS"
                                        onclick="selectSize('jersey', 'SSS')">SSS</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="SS"
                                        onclick="selectSize('jersey', 'SS')">SS</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="S"
                                        onclick="selectSize('jersey', 'S')">S</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="M"
                                        onclick="selectSize('jersey', 'M')">M</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="L"
                                        onclick="selectSize('jersey', 'L')">L</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="XL"
                                        onclick="selectSize('jersey', 'XL')">XL</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="XXL"
                                        onclick="selectSize('jersey', 'XXL')">XXL</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="3XL"
                                        onclick="selectSize('jersey', '3XL')">3XL</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="4XL"
                                        onclick="selectSize('jersey', '4XL')">4XL</button>
                                </div>
                                <div class="col">
                                    <button type="button" class="size-btn" data-size="5XL"
                                        onclick="selectSize('jersey', '5XL')">5XL</button>
                                </div>
                            </div>
                        </div>
                        <div class="mb-4">
                            <label for="notes" class="form-label fw-bold">หมายเหตุ:</label>
                            <textarea id="notes" class="form-control" placeholder="กรุณาระบุข้อมูลเพิ่มเติม (ถ้ามี)..."
                                rows="3" , maxlength="300"></textarea>
                        </div>

                        <div class="card bg-primary text-white mb-4">
                            <div class="card-body p-4">
                                <h3 class="mb-3"><i class="fas fa-money-bill-wave me-2"></i> สรุปยอดรวม</h3>
                                <div id="total-display" class="fs-3 fw-bold">0 บาท</div>
                            </div>
                        </div>

                        <button class="btn btn-primary w-100 py-3 fw-bold"
                            onclick="proceedToCheckout()">ดำเนินการต่อ</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Checkout Section -->
        <div id="checkout-section" style="display: none;">
            <button class="btn btn-warning mb-3 text-white" onclick="goBack()"><i class="fas fa-chevron-left"></i>
                ย้อนกลับ</button>
            <div class="card shadow-sm">
                <div class="card-body p-4">
                    <h3 class="mb-4 text-primary"><i class="fas fa-truck me-2"></i> วิธีการรับสินค้า</h3>

                    <div class="row g-3 mb-4">
                        <div class="col-md-6">
                            <div class="delivery-option text-center disabled-option" data-delivery="pickup"
                                style="opacity: 0.5; cursor: not-allowed; background-color: #f8f9fa;">
                                <i class="fas fa-school fs-1 text-muted mb-2"></i>
                                <h4 class="text-muted">รับที่วิทยาลัย</h4>
                                <p class="mb-0 text-muted fw-bold">ปิดให้บริการชั่วคราว</p>
                                <div class="mt-2">
                                    <span class="badge bg-danger">ไม่พร้อมใช้งาน</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="delivery-option text-center selected" data-delivery="shipping"
                                onclick="selectDelivery('shipping')"
                                style="border: 2px solid #007bff; background-color: #f8f9ff;">
                                <i class="fas fa-truck fs-1 text-primary mb-2"></i>
                                <h4>จัดส่งทางไปรษณีย์</h4>
                                <p class="mb-0 text-primary fw-bold">+ 50 บาท</p>
                                <div class="mt-2">
                                    <span class="badge bg-success">แนะนำ</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="customer-form" class="form-section" style="display: none;">
                        <h3 class="mb-4 text-primary"><i class="fas fa-user me-2"></i> ข้อมูลผู้สั่งซื้อ</h3>

                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="email" class="form-label">อีเมล *</label>
                                <input type="email" id="email" class="form-control" required maxlength="100">
                                <div id="email-error" class="text-danger mt-1 small"></div>
                            </div>

                            <div class="col-md-6">
                                <label for="phone" class="form-label">เบอร์โทรศัพท์ *</label>
                                <input type="tel" id="phone" class="form-control" required maxlength="20">
                                <div id="phone-error" class="text-danger mt-1 small"></div>
                            </div>

                            <div class="col-md-6">
                                <label for="firstname" class="form-label">ชื่อ *</label>
                                <input type="text" id="firstname" class="form-control" required maxlength="100">
                                <div id="firstname-error" class="text-danger mt-1 small"></div>
                            </div>

                            <div class="col-md-6">
                                <label for="lastname" class="form-label">นามสกุล *</label>
                                <input type="text" id="lastname" class="form-control" required maxlength="100">
                                <div id="lastname-error" class="text-danger mt-1 small"></div>
                            </div>

                            <div class="col-12">
                                <label for="status" class="form-label">สถานะผู้ซื้อ *</label>
                                <select id="status" class="form-select" required onchange="toggleYearSelection()">
                                    <option value="">เลือกสถานะ</option>
                                    <option value="student-in">นักศึกษาวิทยาลัยการคอมพิวเตอร์</option>
                                    <option value="student-out">นักศึกษามหาวิทยาลัยขอนแก่น</option>
                                    <option value="other">บุคคลทั่วไป</option>
                                </select>
                            </div>

                            <div id="faculty-section" class="col-md-6" style="display: none;">
                                <label for="faculty" class="form-label">เลือกคณะ/วิทยาลัย
                                    *</label>
                                <select id="faculty" class="form-select" required>
                                    <option value="">เลือกคณะหรือวิทยาลัย</option>

                                    <option value="agriculture">คณะเกษตรศาสตร์</option>
                                    <option value="engineering">คณะวิศวกรรมศาสตร์</option>
                                    <option value="science">คณะวิทยาศาสตร์</option>
                                    <option value="technology">คณะเทคโนโลยี</option>
                                    <option value="architecture">คณะสถาปัตยกรรมศาสตร์</option>

                                    <!-- กลุ่มวิทยาศาสตร์สุขภาพ -->
                                    <option value="nursing">คณะพยาบาลศาสตร์</option>
                                    <option value="medicine">คณะแพทยศาสตร์</option>
                                    <option value="medtech">คณะเทคนิคการแพทย์</option>
                                    <option value="publichealth">คณะสาธารณสุขศาสตร์</option>
                                    <option value="dentistry">คณะทันตแพทยศาสตร์</option>
                                    <option value="pharmacy">คณะเภสัชศาสตร์</option>
                                    <option value="veterinary">คณะสัตวแพทยศาสตร์</option>

                                    <!-- กลุ่มมนุษยศาสตร์และสังคมศาสตร์ -->
                                    <option value="education">คณะศึกษาศาสตร์</option>
                                    <option value="hss">คณะมนุษยศาสตร์และสังคมศาสตร์</option>
                                    <option value="business">คณะบริหารธุรกิจและการบัญชี</option>
                                    <option value="localgov">วิทยาลัยการปกครองท้องถิ่น</option>
                                    <option value="mgmtgrad">วิทยาลัยบัณฑิตศึกษาการจัดการ</option>
                                    <option value="finearts">คณะศิลปกรรมศาสตร์</option>
                                    <option value="law">คณะนิติศาสตร์</option>
                                    <option value="economics">คณะเศรษฐศาสตร์</option>

                                    <!-- กลุ่มสหสาขาวิชา -->
                                    <option value="interdisciplinary">คณะสหวิทยาการ</option>
                                    <option value="international">วิทยาลัยนานาชาติ</option>
                                    <option value="grad">บัณฑิตวิทยาลัย</option>
                                </select>
                            </div>

                            <div id="major-section" class="col-md-6" style="display: none;">
                                <label for="major" class="form-label">หลักสูตร *</label>
                                <select id="major" class="form-select" required>
                                    <option value="">เลือกหลักสูตร</option>
                                    <option value="cs">วิทยาการคอมพิวเตอร์</option>
                                    <option value="it">เทคโนโลยีสารสนเทศ</option>
                                    <option value="gis">ภูมิสารสนเทศศาสตร์</option>
                                    <option value="ai">ปัญญาประดิษฐ์</option>
                                    <option value="cy">ความมั่นคงปลอดภัยไซเบอร์</option>
                                </select>
                            </div>

                            <div id="year-selection" class="col-md-6" style="display: none;">
                                <label for="year" class="form-label">ชั้นปี *</label>
                                <select id="year" class="form-select">
                                    <option value="">เลือกชั้นปี</option>
                                    <option value="1">ชั้นปีที่ 1</option>
                                    <option value="2">ชั้นปีที่ 2</option>
                                    <option value="3">ชั้นปีที่ 3</option>
                                    <option value="4">ชั้นปีที่ 4</option>
                                    <option value="5">ชั้นปีที่ 5</option>
                                    <option value="6">ชั้นปีที่ 6</option>
                                    <option value="7">ชั้นปีที่ 7</option>
                                    <option value="8">ชั้นปีที่ 8</option>
                                </select>
                            </div>

                            <div id="student-id-section" class="col-12" style="display: none;">
                                <label for="student-id" class="form-label">รหัสนักศึกษา *</label>
                                <input type="text" id="student-id" class="form-control" required>
                                <div id="student-id-error" class="text-danger mt-1 small"></div>
                            </div>

                            <div id="address-section" class="col-12" style="display: none;">
                                <label for="address" class="form-label">ที่อยู่สำหรับจัดส่ง *</label>
                                <textarea id="address" class="form-control" rows="3"
                                    placeholder="กรุณาระบุที่อยู่ให้ครบถ้วนพร้อมรหัสไปรษณีย์"></textarea>
                                <div id="address-error" class="text-danger mt-1 small"></div>
                            </div>
                        </div>

                        <div class="card bg-primary text-white my-4">
                            <div class="card-body p-4">
                                <h3 class="mb-3"><i class="fas fa-receipt me-2"></i> สรุปการสั่งซื้อ</h3>
                                <div id="final-summary">
                                    <!-- Content will be added by JavaScript -->
                                </div>
                            </div>
                        </div>

                        <div class="card bg-light mb-4">
                            <div class="card-body p-4">
                                <h4 class="mb-4 text-primary"><i class="fas fa-university me-2"></i> ข้อมูลการโอนเงิน
                                </h4>
                                <div class="text-center mb-3">
                                    <img src="./image/slip.jpeg" alt="QR Code สำหรับโอนเงิน"
                                        class="qr-code-img img-fluid mb-2">
                                    <p class="text-muted small">QR Code สำหรับโอนเงิน</p>
                                </div>
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <p class="mb-1"><strong>ธนาคาร:</strong></p>
                                        <p class="text-muted">กรุงไทย</p>
                                    </div>
                                    <div class="col-md-4">
                                        <p class="mb-1"><strong>เลขที่บัญชี:</strong></p>
                                        <p class="account-number text-primary">664-6-84361-9</p>
                                    </div>
                                    <div class="col-md-4">
                                        <p class="mb-1"><strong>ชื่อบัญชี:</strong></p>
                                        <p class="text-muted">น.ส.กมลพรรณ ปรีสัน และ นายทิวากรณ์ ผลภิญโญ และ
                                            นายณันสพัทธ์ เดิมทรัพย์</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mb-4">
                            <label for="slip" class="form-label fw-bold">อัปโหลดสลิปการโอนเงิน *</label>
                            <div class="input-group">
                                <input type="file" id="slip" class="form-control" accept="image/*" required>
                                <label for="slip" class="input-group-text bg-primary text-white">
                                    <i class="fas fa-camera me-2"></i> เลือกไฟล์
                                </label>
                            </div>
                            <div id="slip-error" class="text-danger mt-1 small"></div>
                        </div>

                        <div id="order-action-area" class="mt-4">
                            <!-- พื้นที่แสดงภาพตัวอย่าง (Thumbnail) ของสลิป -->
                            <div id="slip-thumbnail-container" class="mb-3 text-center" style="display: none;">
                                <p class="mb-1 small text-muted">สลิปที่อัปโหลด (คลิกเพื่อดูภาพขยาย):</p>
                                <img id="slip-thumbnail-img" src="" alt="Slip Thumbnail"
                                    style="max-width: 150px; max-height: 150px; border: 1px solid #ddd; padding: 5px; cursor: pointer; border-radius: 4px;">
                            </div>
                            <button class="btn btn-primary w-100 py-3 fw-bold" id="submit-order-btn"
                                onclick="submitOrder()">
                                <i class="fas fa-check-circle me-2"></i> สั่งซื้อสินค้า
                            </button>
                        </div>

                        <div id="slip-enlarged-viewer"
                            style="display: none; margin-top: 20px; padding: 15px; border: 1px solid #ccc; background-color: #f9f9f9; border-radius: 8px; position: relative;">
                            <button type="button" id="close-enlarged-viewer-btn" class="btn-close" aria-label="ปิด"
                                style="position: absolute; top: 10px; right: 10px; z-index: 1;"></button>
                            <h5 class="mb-3 text-center">สลิปโอนเงิน (ภาพขยาย)</h5>
                            <img id="slip-enlarged-img" src="" alt="Enlarged Slip Image" class="img-fluid"
                                style="display: block; margin: auto; max-height: 70vh;" />
                        </div>
                    </div>
                </div>
            </div>

            <!-- Success Section -->

        </div>
    </div>

    <footer class=" text-white pt-4 pb-2 mt-5" style="background-color: #30319D;">
        <div class="container text-center">
            <h5 class="fw-bold">STUDENT UNION | College Of Computing</h5>
            <p class="small mb-1">สโมสรนักศึกษาวิทยาลัยการคอมพิวเตอร์</p>
            <p class="small mb-2">วิทยาลัยการคอมพิวเตอร์ มหาวิทยาลัยขอนแก่น</p>

            <p class="small text-secondary mb-0">&copy; 2025 CP SHOP. All rights reserved.</p>
        </div>
    </footer>
    <script src="./script.js"></script>
    <style>
        .timeline {
            position: relative;
            padding: 20px 0;
        }

        .timeline-item {
            position: relative;
            padding: 0 0 30px 40px;
            border-left: 2px solid #e3e3e3;
        }

        .timeline-item:last-child {
            border-left: 2px solid transparent;
        }

        .timeline-dot {
            position: absolute;
            left: -8px;
            top: 0;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .timeline-content {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .timeline-item.active .timeline-dot {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(0, 123, 255, 0.7);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(0, 123, 255, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(0, 123, 255, 0);
            }
        }

        .timeline-item.completed .timeline-dot {
            background-color: #28a745 !important;
        }

        .timeline-item.completed .timeline-content {
            opacity: 0.8;
        }
    </style>

    <script>
        function goBack() {
            document.getElementById('checkout-section').style.display = 'none';
            document.getElementById('shopping-section').style.display = 'block';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ฟังก์ชันติดตามคำสั่งซื้อ
        async function trackOrder() {
            const trackingNumber = document.getElementById('tracking-number').value.trim();

            if (!trackingNumber) {
                Swal.fire({
                    icon: 'warning',
                    title: 'กรุณาใส่หมายเลขการสั่งซื้อ',
                    text: 'กรุณาใส่หมายเลขการสั่งซื้อที่ต้องการติดตาม',
                    confirmButtonText: 'ตกลง'
                });
                return;
            }

            try {
                // แสดง loading
                Swal.fire({
                    title: 'กำลังค้นหา...',
                    text: 'กรุณารอสักครู่',
                    allowOutsideClick: false,
                    didOpen: () => {
                        Swal.showLoading()
                    }
                });

                const response = await fetch(`/track-order/${trackingNumber}`);
                const result = await response.json();

                Swal.close();

                if (result.success) {
                    displayTrackingResults(result.order);
                } else {
                    Swal.fire({
                        icon: 'error',
                        title: 'ไม่พบข้อมูล',
                        text: result.message || 'ไม่พบหมายเลขการสั่งซื้อที่ระบุ',
                        confirmButtonText: 'ตกลง'
                    });
                }
            } catch (error) {
                Swal.close();
                console.error('Error tracking order:', error);
                Swal.fire({
                    icon: 'error',
                    title: 'เกิดข้อผิดพลาด',
                    text: 'ไม่สามารถติดตามคำสั่งซื้อได้ กรุณาลองใหม่อีกครั้ง',
                    confirmButtonText: 'ตกลง'
                });
            }
        }

        // ฟังก์ชันแสดงผลการติดตาม
        function displayTrackingResults(order) {
            // แสดงส่วนผลลัพธ์
            document.getElementById('tracking-results').style.display = 'block';

            // อัปเดตข้อมูลคำสั่งซื้อ
            document.getElementById('order-number-display').textContent = order.orderRef;
            document.getElementById('order-date-display').textContent = formatDate(order.orderDate);
            document.getElementById('order-total-display').textContent = formatPrice(order.totalAmount);

            // กำหนดสถานะและสี
            const statusElement = document.getElementById('order-status-display');
            const statusInfo = getStatusInfo(order.status);
            statusElement.textContent = statusInfo.text;
            statusElement.className = `badge ${statusInfo.class}`;

            // อัปเดตรหัสติดตาม
            const trackingCodeElement = document.getElementById('tracking-code');
            if (order.trackingCode) {
                trackingCodeElement.textContent = order.trackingCode;
            } else {
                trackingCodeElement.textContent = 'ยังไม่มีรหัสติดตาม';
            }

            // อัปเดต timeline
            updateTimeline(order.status);

            // เลื่อนไปยังผลลัพธ์
            document.getElementById('tracking-results').scrollIntoView({
                behavior: 'smooth'
            });
        }

        // ฟังก์ชันอัปเดต timeline
        function updateTimeline(currentStatus) {
            // Reset all timeline items
            const timelineItems = document.querySelectorAll('.timeline-item');
            timelineItems.forEach(item => {
                item.classList.remove('active', 'completed');
            });

            const statusOrder = ['pending', 'confirmed', 'preparing', 'shipping', 'delivered'];
            const currentIndex = statusOrder.indexOf(currentStatus);

            statusOrder.forEach((status, index) => {
                const element = document.getElementById(`status-${status}`);
                if (element) {
                    if (index < currentIndex) {
                        element.classList.add('completed');
                    } else if (index === currentIndex) {
                        element.classList.add('active');
                    }
                }
            });
        }

        // ฟังก์ชันกำหนดข้อมูลสถานะ
        function getStatusInfo(status) {
            const statusMap = {
                'pending': { text: 'รอการยืนยัน', class: 'bg-warning' },
                'confirmed': { text: 'ยืนยันแล้ว', class: 'bg-info' },
                'preparing': { text: 'กำลังเตรียมสินค้า', class: 'bg-primary' },
                'shipping': { text: 'จัดส่งแล้ว', class: 'bg-warning' },
                'delivered': { text: 'จัดส่งสำเร็จ', class: 'bg-success' }
            };

            return statusMap[status] || { text: 'ไม่ทราบสถานะ', class: 'bg-secondary' };
        }

        // ฟังก์ชันจัดรูปแบบวันที่
        function formatDate(dateString) {
            if (!dateString) return '-';

            const date = new Date(dateString);
            return date.toLocaleDateString('th-TH', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        // ฟังก์ชันจัดรูปแบบราคา
        function formatPrice(price) {
            if (!price) return '0';
            return Number(price).toLocaleString('th-TH');
        }


        const carousel = document.querySelector('#carouselIndividual');
        const bsCarousel = new bootstrap.Carousel(carousel, {
            interval: 1500,
            ride: 'carousel'
        });

        async function submitOrderToDatabase(orderData) {
            try {
                const response = await fetch('/submit-order', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        orderRef: orderData.orderRef,
                        packageName: orderData.packageName,
                        firstname: orderData.firstname,
                        lastname: orderData.lastname,
                        email: orderData.email,
                        phone: orderData.phone,
                        status: orderData.status,
                        year: orderData.year,
                        major: orderData.major,
                        faculty: orderData.faculty,
                        studentId: orderData.studentId,
                        deliveryType: orderData.deliveryType,
                        address: orderData.address,
                        totalAmount: orderData.totalAmount,
                        items: orderData.items,
                        notes: orderData.notes,
                        slipUrl: orderData.slipUrl
                    })
                });

                const result = await response.json();

                if (result.success) {
                    Swal.fire({
                        icon: 'success',
                        title: 'สำเร็จ!',
                        html: `
                            <div class="text-start">
                                <p><strong>คำสั่งซื้อของคุณถูกบันทึกเรียบร้อยแล้ว</strong></p>
                                <p><strong>หมายเลขคำสั่งซื้อ:</strong> ${result.orderRef}</p>
                                ${result.orderRef ? `<p><strong>รหัสติดตาม:</strong> ${result.orderRef}</p>` : ''}
                                <hr>
                                <p class="text-muted small">
                                    • ทีมงานจะติดต่อกลับภายใน 24 ชั่วโมง<br>
                                    • คุณสามารถติดตามสถานะได้ด้วยหมายเลขคำสั่งซื้อ<br>
                                    • หากมีคำถามติดต่อได้ที่ smocp.kku@gmail.com
                                </p>
                            </div>
                        `,
                        confirmButtonText: 'เข้าใจแล้ว',
                        allowOutsideClick: false
                    }).then(() => {
                        // Reset form or redirect as needed
                        location.reload();
                    });
                } else {
                    throw new Error(result.error || 'เกิดข้อผิดพลาดในการบันทึกข้อมูล');
                }
            } catch (error) {
                console.error('Error submitting order:', error);
                Swal.fire({
                    icon: 'error',
                    title: 'เกิดข้อผิดพลาด',
                    text: error.message || 'ไม่สามารถบันทึกคำสั่งซื้อได้ กรุณาลองใหม่อีกครั้ง',
                    confirmButtonText: 'ตกลง'
                });
            }
        }

        // Override the original sendToGoogleForms function
        window.sendToGoogleForms = submitOrderToDatabase;

        document.addEventListener('DOMContentLoaded', function () {
            selectDelivery('shipping');

            const pickupOption = document.querySelector('[data-delivery="pickup"]');
            if (pickupOption) {
                pickupOption.style.pointerEvents = 'none';
                pickupOption.onclick = null;

                pickupOption.addEventListener('click', function (e) {
                    e.preventDefault();
                    e.stopPropagation();
                    Swal.fire({
                        icon: 'info',
                        title: 'ขออภัย',
                        text: 'การรับสินค้าที่วิทยาลัยยังไม่พร้อมใช้งานในขณะนี้ กรุณาเลือกการจัดส่งทางไปรษณีย์',
                        confirmButtonText: 'เข้าใจแล้ว'
                    });
                    return false;
                });
            }

            const addressField = document.getElementById('address-field');
            if (addressField) {
                addressField.style.display = 'block';
            }

            // เพิ่ม Enter key support สำหรับการติดตามคำสั่งซื้อ
            const trackingInput = document.getElementById('tracking-number');
            if (trackingInput) {
                trackingInput.addEventListener('keypress', function (e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        trackOrder();
                    }
                });
            }
        });
    </script>


</body>

</html>