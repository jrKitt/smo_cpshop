;/*FB_PKG_DELIM*/

__d("IGDChatTabsStateContext.react",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h;e=h||(h=d("react"));var i=h.useContext,j=e.createContext(null),k=e.createContext(c("emptyFunction"));function l(){return i(j)}function a(){return i(k)}function b(){var a=l();return a==null?void 0:a.activeView}g.IGDChatTabsStateContext=j;g.IGDChatTabsDispatchContext=k;g.useIGDChatTabsState=l;g.useIGDChatTabsDispatch=a;g.useCurrentChatTabsView=b}),98);
__d("IGDChatTabsStateTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({ChatTabsThreadListView:"chat_tabs_thread_list_view",ChatTabsThreadView:"chat_tabs_thread_view",ChatTabsOmnipickerView:"chat_tabs_omnipicker_view"});c=b("$InternalEnum")({NotificationWithJewel:"notification_with_jewel",NotificationWithTabOpen:"notification_with_tab_open",ChatTabsThreadListItem:"chat_tabs_thread_list_item",ChatTabsOmnipicker:"chat_tabs_omnipicker",ChatTabsPOG:"chat_tabs_pog",Profile:"profile",UserHoverCard:"user_hover_card",DirectInbox:"direct_inbox",Unknown:"unknown"});f.IGDChatTabsView=a;f.IGDChatTabsMessagingInitiationSource=c}),66);
__d("IGDThreadListNewMessageLoggingDataContext",["react","react-compiler-runtime","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;f=e.createContext;var j=e.useContext;e.useMemo;var k=f("");function a(a){var b=d("react-compiler-runtime").c(4);a=a.children;var e=j(k);bb0:{if(Boolean(e)){e=e;break bb0}var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=c("uuidv4")(),b[0]=f):f=b[0];e=f}f=e;b[1]!==a||b[2]!==f?(e=i.jsx(k.Provider,{value:f,children:a}),b[1]=a,b[2]=f,b[3]=e):e=b[3];return e}function b(){var a=d("react-compiler-runtime").c(1),b=j(k);if(Boolean(b))return b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("uuidv4")(),a[0]=b):b=a[0];return b}g.IGDThreadListNewMessageLoggingContextProvider=a;g.useFlowInstanceIdContext=b}),98);
__d("getInstamadilloLoggingExtraData",["I64","IGDInstamadilloUtils","IGDThreadTTLCUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b,c=d("IGDInstamadilloUtils").isInstamadilloCutover(a),e=d("IGDInstamadilloUtils").isInstamadilloTransportEnabled(a),f=d("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(a);b=(b=a==null?void 0:a.consistentThreadFbid)!=null?b:(h||(h=d("I64"))).zero;b=babelHelpers["extends"]({},d("IGDThreadTTLCUtils").getTTLCLoggingExtraData(a),{consistent_thread_fbid:(h||(h=d("I64"))).to_string(b),is_dm:String(f),is_instamadillo:String(e),is_instamadillo_tlc:String(c)});a!=null&&(b.thread_key=(h||(h=d("I64"))).to_string(a.threadKey),(a==null?void 0:a.consistentThreadFbid)!=null&&(b.consistent_thread_fbid=(h||(h=d("I64"))).to_string(a.consistentThreadFbid)));return b}g["default"]=a}),98);
__d("useIGDChatTabsMessagingSource.react",["I64","IGDChatTabsStateContext.react","IGDChatTabsStateTypes","MWLSThreadDisplayContext","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=d("react-compiler-runtime").c(3),c=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),e=d("IGDChatTabsStateContext.react").useIGDChatTabsState();if(c==="ChatTab"){b[0]!==(e==null?void 0:e.openedTabs)||b[1]!==a?(c=e==null?void 0:e.openedTabs.get((h||(h=d("I64"))).to_string(a)),b[0]=e==null?void 0:e.openedTabs,b[1]=a,b[2]=c):c=b[2];e=c;return(a=e==null?void 0:e.source)!=null?a:d("IGDChatTabsStateTypes").IGDChatTabsMessagingInitiationSource.Unknown}return null}g["default"]=a}),98);
__d("useMWLSAcceptMessageRequest",["Int64Hooks","LSFactory","LSOptimisticAcceptMessageRequestStoredProcedure","promiseDone","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=d("react-compiler-runtime").c(4),e=(h||(h=c("useReStore")))(),g,i;b[0]!==e||b[1]!==a?(g=function(){c("promiseDone")(e.runInTransaction(function(b){return c("LSOptimisticAcceptMessageRequestStoredProcedure")(c("LSFactory")(b),{threadKey:a})},"readwrite",void 0,void 0,f.id+":25"))},i=[e,a],b[0]=e,b[1]=a,b[2]=g,b[3]=i):(g=b[2],i=b[3]);return d("Int64Hooks").useCallbackInt64(g,i)}g["default"]=a}),98);
__d("useMWV2OnSendOpenMessage",["I64","IGDThreadListNewMessageLoggingDataContext","Int64Hooks","LSContactViewerRelationship","LSIntEnum","LSMessagingThreadTypeUtil","MWCMThreadTypes.react","MWLSThreadDisplayContext","MWPActor.react","MWPReplyContext.react","MessageRequestsLog","MessengerWebUXLogger","ReQL","getInstamadilloLoggingExtraData","promiseDone","qpl","react","react-compiler-runtime","sendToSentQPLLogger","useCometInteractionTracing","useIGDChatTabsMessagingSource.react","useMWLSAcceptMessageRequest","useMWV2SendOpenMessage"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=h||d("react");var k=b.useContext;b.useMemo;function a(a){var b=d("react-compiler-runtime").c(45),e=a.afterSendMessage,f=a.checkWAStorageForLogging,g=a.disableMarkRead,h=a.ephemeralDurationInSec,l=a.isIGDW,m=a.onOptimisticMessageCreation,n=a.onUploadFailure,o=a.onUploadStart,p=a.onUploadSuccess,q=a.pluginType,r=a.skipUrlPreviewGen,s=a.thread,t=d("MWPActor.react").useActor();a=k(d("MWPReplyContext.react").MWPReplyContext);var u=a.clearReply;a=s.threadSubtype;var v=s.eventStartTimestampMs!=null,w;b[0]!==v?(w=v.toString(),b[0]=v,b[1]=w):w=b[1];b[2]===Symbol.for("react.memo_cache_sentinel")?(v=(!1).toString(),b[2]=v):v=b[2];var x;b[3]===Symbol.for("react.memo_cache_sentinel")?(x=(!1).toString(),b[3]=x):x=b[3];var y;b[4]!==s.threadKey?(y=(i||(i=d("I64"))).to_string(s.threadKey),b[4]=s.threadKey,b[5]=y):y=b[5];var z;b[6]!==a?(z=a!=null&&d("MWCMThreadTypes.react").isIGBroadcastChannelThread(a)?(i||(i=d("I64"))).to_string(a):"",b[6]=a,b[7]=z):z=b[7];b[8]!==s.threadType?(a=(i||(i=d("I64"))).to_string(s.threadType),b[8]=s.threadType,b[9]=a):a=b[9];b[10]!==w||b[11]!==y||b[12]!==z||b[13]!==a?(v={is_community_event:w,is_cutover:v,is_secure:x,thread_id:y,thread_subtype:z,thread_type:a},b[10]=w,b[11]=y,b[12]=z,b[13]=a,b[14]=v):v=b[14];x=v;var A=x,B=c("useMWLSAcceptMessageRequest")(s.threadKey);b[15]===Symbol.for("react.memo_cache_sentinel")?(w=c("qpl")._(30605384,"573"),b[15]=w):w=b[15];var C=c("useCometInteractionTracing")(w,"fast","INTERACTION",void 0,A);b[16]!==g||b[17]!==h||b[18]!==m||b[19]!==n||b[20]!==o||b[21]!==p||b[22]!==q||b[23]!==r||b[24]!==s?(y={disableMarkRead:g,ephemeralDurationInSec:h,onOptimisticMessageCreation:m,onUploadFailure:n,onUploadStart:o,onUploadSuccess:p,pluginType:q,skipUrlPreviewGen:r,thread:s},b[16]=g,b[17]=h,b[18]=m,b[19]=n,b[20]=o,b[21]=p,b[22]=q,b[23]=r,b[24]=s,b[25]=y):y=b[25];var D=c("useMWV2SendOpenMessage")(y),E=c("MessengerWebUXLogger").useInteractionLogger(),F=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext();b[26]!==s?(z=c("getInstamadilloLoggingExtraData")(s),b[26]=s,b[27]=z):z=b[27];var G=z,H=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),I=c("useIGDChatTabsMessagingSource.react")(s.threadKey);b[28]!==B||b[29]!==t||b[30]!==e||b[31]!==I||b[32]!==f||b[33]!==u||b[34]!==A||b[35]!==H||b[36]!==F||b[37]!==G||b[38]!==l||b[39]!==E||b[40]!==D||b[41]!==s||b[42]!==C?(a=function(a,b,g,h,k,m,n,o,p,q,r,v,w,x,y,z,J,K){var L=r===void 0?!1:r,M=v===void 0?!1:v;if(l===!0){w=H==="ChatTab"&&I!=null?babelHelpers.extends({},G,{messaging_source:String(I)}):G;E==null?void 0:E({eventName:"send_message",extraData:w,flowInstanceId:F})}var N=d("LSMessagingThreadTypeUtil").isMessageRequest(s);C(function(l){var r=d("sendToSentQPLLogger").markSendToSentStart(f);d("sendToSentQPLLogger").addSendToSentAnnotations(r,{string:A});c("promiseDone")(D(a,b,g,h,k,m,n,o,p,async function(a){var b;q==null?void 0:q();if(!d("LSMessagingThreadTypeUtil").isOneToOne(s.threadType))return;b=(b=await d("ReQL").firstAsync(d("ReQL").mergeJoin(d("ReQL").fromTableAscending(a.participants,[]).getKeyRange(s.threadKey),d("ReQL").fromTableAscending(a.contacts)).filter(function(a){a=a[1];return!(i||(i=d("I64"))).equal(a.id,t)})))==null?void 0:b[1];if(b==null)return;!(i||(i=d("I64"))).to_float(b.contactViewerRelationship)!==c("LSContactViewerRelationship").CONTACT_OF_VIEWER&&await a.contacts.put(babelHelpers.extends({},b,{contactViewerRelationship:(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactViewerRelationship").CONTACT_OF_VIEWER)}))},L,M,l,r,void 0,x,y,z,J,K),function(){e(),u(s.threadKey,!1),N&&(B(),d("MessageRequestsLog").logActionConfirmed(s,1))})})},v=[B,l,s,C,H,I,G,E,F,f,A,D,t,e,u],b[28]=B,b[29]=t,b[30]=e,b[31]=I,b[32]=f,b[33]=u,b[34]=A,b[35]=H,b[36]=F,b[37]=G,b[38]=l,b[39]=E,b[40]=D,b[41]=s,b[42]=C,b[43]=a,b[44]=v):(a=b[43],v=b[44]);return d("Int64Hooks").useCallbackInt64(a,v)}g.default=a}),98);