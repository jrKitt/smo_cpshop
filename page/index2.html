<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CP Shop - ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            display: none;
        }

        .section.active {
            display: block;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .product-card {
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s ease;
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .product-card.selected {
            border-color: #667eea;
            background: linear-gradient(145deg, #f0f4ff, #e6edff);
        }

        .product-title {
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #667eea;
        }

        .product-items {
            margin-bottom: 15px;
            color: #666;
        }

        .product-price {
            font-size: 1.2em;
            font-weight: bold;
            color: #e74c3c;
            margin-bottom: 15px;
        }

        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .quantity-btn {
            background: #667eea;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .quantity-btn:hover {
            background: #5a6fd8;
        }

        .size-selection {
            margin-top: 15px;
        }

        .size-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 5px;
            margin-top: 10px;
        }

        .size-btn {
            padding: 8px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 5px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
        }

        .size-btn:hover, .size-btn.selected {
            background: #667eea;
            color: white;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .error {
            color: #e74c3c;
            font-size: 14px;
            margin-top: 5px;
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 10px 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .summary {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .summary h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }

        .total {
            font-size: 1.2em;
            font-weight: bold;
            color: #e74c3c;
            border-top: 2px solid #667eea;
            padding-top: 10px;
            margin-top: 10px;
        }

        .delivery-option {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }

        .delivery-card {
            flex: 1;
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .delivery-card:hover, .delivery-card.selected {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .file-upload {
            border: 2px dashed #ddd;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-upload:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .file-upload.has-file {
            border-color: #27ae60;
            background: #f0fff4;
        }

        .progress-bar {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }

        .progress-step {
            padding: 10px 20px;
            margin: 0 5px;
            background: #f0f0f0;
            border-radius: 20px;
            color: #666;
            position: relative;
        }

        .progress-step.active {
            background: #667eea;
            color: white;
        }

        .progress-step.completed {
            background: #27ae60;
            color: white;
        }

        @media (max-width: 768px) {
            .product-grid {
                grid-template-columns: 1fr;
            }
            
            .delivery-option {
                flex-direction: column;
            }
            
            .container {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéì CP Shop</h1>
            <p>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏™‡πÇ‡∏°‡∏™‡∏£‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå</p>
        </div>

        <div class="progress-bar">
            <div class="progress-step active" id="step1">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</div>
            <div class="progress-step" id="step2">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</div>
            <div class="progress-step" id="step3">‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</div>
            <div class="progress-step" id="step4">‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</div>
        </div>

        <!-- Step 1: Product Selection -->
        <div class="section active" id="section1">
            <h2>üõçÔ∏è ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</h2>
            <div class="product-grid">
                <div class="product-card" data-product="cp-package">
                    <div class="product-title">CP Package</div>
                    <div class="product-items">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÅ‡∏ö‡∏ö</div>
                    <div class="product-price">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</div>
                    <div class="quantity-selector">
                        <span>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:</span>
                        <button class="quantity-btn" onclick="changeQuantity('cp-package', -1)">-</button>
                        <span id="qty-cp-package">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('cp-package', 1)">+</button>
                    </div>
                    <div id="cp-package-items" style="display:none;">
                        <h4>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:</h4>
                        <label><input type="checkbox" value="polo" data-price="200"> ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÇ‡∏õ‡πÇ‡∏• (200‡∏ø)</label><br>
                        <label><input type="checkbox" value="jacket" data-price="350"> ‡πÅ‡∏à‡πá‡∏Ñ‡πÄ‡∏Å‡πá‡∏ï (350‡∏ø)</label><br>
                        <label><input type="checkbox" value="tungting" data-price="50"> ‡∏ï‡∏∏‡πâ‡∏á‡∏ï‡∏¥‡πâ‡∏á (50‡∏ø)</label><br>
                        <label><input type="checkbox" value="tie-clip" data-price="80"> ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡∏µ‡∏ö‡πÄ‡∏ô‡∏Ñ‡πÑ‡∏ó (80‡∏ø)</label><br>
                        <label><input type="checkbox" value="belt-head" data-price="120"> ‡∏´‡∏±‡∏ß‡πÄ‡∏Ç‡πá‡∏°‡∏Ç‡∏±‡∏î (120‡∏ø)</label>
                    </div>
                </div>

                <div class="product-card" data-product="cpset-m1">
                    <div class="product-title">CPSET M1</div>
                    <div class="product-items">‡∏ó‡∏µ‡πà‡∏´‡∏ô‡∏µ‡∏ö‡πÄ‡∏ô‡∏Ñ‡πÑ‡∏ó + ‡∏´‡∏±‡∏ß‡πÄ‡∏Ç‡πá‡∏°‡∏Ç‡∏±‡∏î</div>
                    <div class="product-price">200 ‡∏ö‡∏≤‡∏ó</div>
                    <div class="quantity-selector">
                        <span>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:</span>
                        <button class="quantity-btn" onclick="changeQuantity('cpset-m1', -1)">-</button>
                        <span id="qty-cpset-m1">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('cpset-m1', 1)">+</button>
                    </div>
                </div>

                <div class="product-card" data-product="cpset-w1">
                    <div class="product-title">CPSET W1</div>
                    <div class="product-items">‡∏ï‡∏∏‡πâ‡∏á‡∏ï‡∏¥‡πâ‡∏á + ‡∏´‡∏±‡∏ß‡πÄ‡∏Ç‡πá‡∏°‡∏Ç‡∏±‡∏î</div>
                    <div class="product-price">170 ‡∏ö‡∏≤‡∏ó</div>
                    <div class="quantity-selector">
                        <span>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:</span>
                        <button class="quantity-btn" onclick="changeQuantity('cpset-w1', -1)">-</button>
                        <span id="qty-cpset-w1">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('cpset-w1', 1)">+</button>
                    </div>
                </div>

                <div class="product-card" data-product="dekcom-set">
                    <div class="product-title">Dekcom SET</div>
                    <div class="product-items">‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÇ‡∏õ‡πÇ‡∏• + ‡πÅ‡∏à‡πá‡∏Ñ‡πÄ‡∏Å‡πá‡∏ï</div>
                    <div class="product-price">550 ‡∏ö‡∏≤‡∏ó</div>
                    <div class="quantity-selector">
                        <span>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:</span>
                        <button class="quantity-btn" onclick="changeQuantity('dekcom-set', -1)">-</button>
                        <span id="qty-dekcom-set">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('dekcom-set', 1)">+</button>
                    </div>
                    <div class="size-selection" id="dekcom-sizes" style="display:none;">
                        <label>‡πÑ‡∏ã‡∏™‡πå‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÇ‡∏õ‡πÇ‡∏•:</label>
                        <div class="size-grid">
                            <button class="size-btn" onclick="selectSize('dekcom-polo', 'S')">S</button>
                            <button class="size-btn" onclick="selectSize('dekcom-polo', 'M')">M</button>
                            <button class="size-btn" onclick="selectSize('dekcom-polo', 'L')">L</button>
                            <button class="size-btn" onclick="selectSize('dekcom-polo', 'XL')">XL</button>
                            <button class="size-btn" onclick="selectSize('dekcom-polo', 'XXL')">XXL</button>
                        </div>
                        <label style="margin-top: 15px;">‡πÑ‡∏ã‡∏™‡πå‡πÅ‡∏à‡πá‡∏Ñ‡πÄ‡∏Å‡πá‡∏ï:</label>
                        <div class="size-grid">
                            <button class="size-btn" onclick="selectSize('dekcom-jacket', 'S')">S</button>
                            <button class="size-btn" onclick="selectSize('dekcom-jacket', 'M')">M</button>
                            <button class="size-btn" onclick="selectSize('dekcom-jacket', 'L')">L</button>
                            <button class="size-btn" onclick="selectSize('dekcom-jacket', 'XL')">XL</button>
                            <button class="size-btn" onclick="selectSize('dekcom-jacket', 'XXL')">XXL</button>
                        </div>
                    </div>
                </div>

                <div class="product-card" data-product="full-collection">
                    <div class="product-title">Full Collection</div>
                    <div class="product-items">‡∏ó‡∏∏‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÇ‡∏õ‡πÇ‡∏• + ‡πÅ‡∏à‡πá‡∏Ñ‡πÄ‡∏Å‡πá‡∏ï + ‡∏ï‡∏∏‡πâ‡∏á‡∏ï‡∏¥‡πâ‡∏á + ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡∏µ‡∏ö‡πÄ‡∏ô‡∏Ñ‡πÑ‡∏ó + ‡∏´‡∏±‡∏ß‡πÄ‡∏Ç‡πá‡∏°‡∏Ç‡∏±‡∏î)</div>
                    <div class="product-price">800 ‡∏ö‡∏≤‡∏ó</div>
                    <div class="quantity-selector">
                        <span>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:</span>
                        <button class="quantity-btn" onclick="changeQuantity('full-collection', -1)">-</button>
                        <span id="qty-full-collection">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('full-collection', 1)">+</button>
                    </div>
                    <div class="size-selection" id="full-sizes" style="display:none;">
                        <label>‡πÑ‡∏ã‡∏™‡πå‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÇ‡∏õ‡πÇ‡∏•:</label>
                        <div class="size-grid">
                            <button class="size-btn" onclick="selectSize('full-polo', 'S')">S</button>
                            <button class="size-btn" onclick="selectSize('full-polo', 'M')">M</button>
                            <button class="size-btn" onclick="selectSize('full-polo', 'L')">L</button>
                            <button class="size-btn" onclick="selectSize('full-polo', 'XL')">XL</button>
                            <button class="size-btn" onclick="selectSize('full-polo', 'XXL')">XXL</button>
                        </div>
                        <label style="margin-top: 15px;">‡πÑ‡∏ã‡∏™‡πå‡πÅ‡∏à‡πá‡∏Ñ‡πÄ‡∏Å‡πá‡∏ï:</label>
                        <div class="size-grid">
                            <button class="size-btn" onclick="selectSize('full-jacket', 'S')">S</button>
                            <button class="size-btn" onclick="selectSize('full-jacket', 'M')">M</button>
                            <button class="size-btn" onclick="selectSize('full-jacket', 'L')">L</button>
                            <button class="size-btn" onclick="selectSize('full-jacket', 'XL')">XL</button>
                            <button class="size-btn" onclick="selectSize('full-jacket', 'XXL')">XXL</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="order-summary" class="summary" style="display:none;">
                <h3>‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h3>
                <div id="summary-items"></div>
                <div class="total">
                    <div>‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <span id="total-price">0</span> ‡∏ö‡∏≤‡∏ó</div>
                </div>
            </div>

            <button class="btn" onclick="nextStep()" id="next-btn" disabled>‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
        </div>

        <!-- Step 2: Delivery Information -->
        <div class="section" id="section2">
            <h2>üì¶ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</h2>
            
            <div class="delivery-option">
                <div class="delivery-card" onclick="selectDelivery('pickup')">
                    <h3>‡∏£‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢</h3>
                    <p>‡∏ü‡∏£‡∏µ</p>
                </div>
                <div class="delivery-card" onclick="selectDelivery('delivery')">
                    <h3>‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå</h3>
                    <p>+50 ‡∏ö‡∏≤‡∏ó</p>
                </div>
            </div>

            <form id="customer-form">
                <div class="form-group">
                    <label for="email">‡∏≠‡∏µ‡πÄ‡∏°‡∏• *</label>
                    <input type="email" id="email" name="email" required>
                    <div class="error" id="email-error"></div>
                </div>

                <div class="form-group">
                    <label for="firstname">‡∏ä‡∏∑‡πà‡∏≠ *</label>
                    <input type="text" id="firstname" name="firstname" required>
                    <div class="error" id="firstname-error"></div>
                </div>

                <div class="form-group">
                    <label for="lastname">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• *</label>
                    <input type="text" id="lastname" name="lastname" required>
                    <div class="error" id="lastname-error"></div>
                </div>

                <div class="form-group">
                    <label for="phone">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå *</label>
                    <input type="tel" id="phone" name="phone" required>
                    <div class="error" id="phone-error"></div>
                </div>

                <div id="address-section" style="display:none;">
                    <div class="form-group">
                        <label for="address">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á *</label>
                        <textarea id="address" name="address" rows="4"></textarea>
                        <div class="error" id="address-error"></div>
                    </div>
                </div>
            </form>

            <button class="btn" onclick="prevStep()">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
            <button class="btn" onclick="nextStep()" id="next-btn-2" disabled>‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
        </div>

        <!-- Step 3: Payment -->
        <div class="section" id="section3">
            <h2>üí≥ ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h2>
            
            <div class="summary">
                <h3>‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h3>
                <div id="final-summary"></div>
                <div class="total">
                    <div>‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <span id="final-total">0</span> ‡∏ö‡∏≤‡∏ó</div>
                </div>
            </div>

            <div style="background:#f8f9fa; padding:20px; border-radius:10px; margin:20px 0;">
                <h4>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</h4>
                <p><strong>‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£:</strong> ‡∏Å‡∏™‡∏¥‡∏Å‡∏£‡πÑ‡∏ó‡∏¢</p>
                <p><strong>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</strong> 123-4-56789-0</p>
                <p><strong>‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</strong> ‡∏™‡πÇ‡∏°‡∏™‡∏£‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå</p>
            </div>

            <div class="form-group">
                <label for="slip">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô *</label>
                <div class="file-upload" onclick="document.getElementById('slip').click()">
                    <input type="file" id="slip" accept="image/*" style="display:none;" onchange="handleFileUpload(this)">
                    <div id="upload-text">üì∑ ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏•‡∏¥‡∏õ</div>
                </div>
                <div class="error" id="slip-error"></div>
            </div>

            <button class="btn" onclick="prevStep()">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
            <button class="btn" onclick="nextStep()" id="next-btn-3" disabled>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>
        </div>

        <!-- Step 4: Completion -->
        <div class="section" id="section4">
            <div style="text-align:center; padding:40px;">
                <h2>‚úÖ ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</h2>
                <p style="font-size:18px; margin:20px 0;">‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</p>
                <p>‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</p>
                <button class="btn" onclick="location.reload()">‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡πÉ‡∏´‡∏°‡πà</button>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        let cart = {};
        let selectedSizes = {};
        let deliveryType = '';
        let deliveryCost = 0;

        const productPrices = {
            'cp-package': 0,
            'cpset-m1': 200,
            'cpset-w1': 170,
            'dekcom-set': 550,
            'full-collection': 800
        };

        const itemPrices = {
            'polo': 200,
            'jacket': 350,
            'tungting': 50,
            'tie-clip': 80,
            'belt-head': 120
        };

        function changeQuantity(product, change) {
            if (!cart[product]) cart[product] = 0;
            cart[product] = Math.max(0, cart[product] + change);
            
            document.getElementById(`qty-${product}`).textContent = cart[product];
            
            // Show/hide size selection and CP Package items
            if (product === 'dekcom-set') {
                document.getElementById('dekcom-sizes').style.display = cart[product] > 0 ? 'block' : 'none';
            }
            if (product === 'full-collection') {
                document.getElementById('full-sizes').style.display = cart[product] > 0 ? 'block' : 'none';
            }
            if (product === 'cp-package') {
                document.getElementById('cp-package-items').style.display = cart[product] > 0 ? 'block' : 'none';
            }
            
            updateProductCard(product);
            updateOrderSummary();
        }

        function updateProductCard(product) {
            const card = document.querySelector(`[data-product="${product}"]`);
            if (cart[product] > 0) {
                card.classList.add('selected');
            } else {
                card.classList.remove('selected');
            }
        }

        // function selectSize(item, size) {
        //     selectedSizes[item] = size;
        function selectSize(productKey, size) {
        selectedSizes[productKey] = size;
        console.log("Selected Sizes:", selectedSizes);
            
            // Update UI
        //     const buttons = document.querySelectorAll(`[onclick*="${item}"]`);
        //     buttons.forEach(btn => btn.classList.remove('selected'));
        //     event.target.classList.add('selected');
            
        //     updateOrderSummary();
        // }
        const sizeButtons = document.querySelectorAll(`#${productKey}-sizes .size-btn`);
        sizeButtons.forEach(btn => btn.classList.remove('active'));

        event.target.classList.add('active');
    }

        function selectDelivery(type) {
            deliveryType = type;
            deliveryCost = type === 'delivery' ? 50 : 0;
            
            // Update UI
            document.querySelectorAll('.delivery-card').forEach(card => card.classList.remove('selected'));
            event.target.classList.add('selected');
            
            // Show/hide address section
            document.getElementById('address-section').style.display = type === 'delivery' ? 'block' : 'none';
            
            updateOrderSummary();
            validateStep2();
        }

        function updateOrderSummary() {
            let total = 0;
            let hasItems = false;
            const summaryDiv = document.getElementById('summary-items');
            const finalSummaryDiv = document.getElementById('final-summary');
            let summaryHTML = '';

            for (let product in cart) {
                if (cart[product] > 0) {
                    hasItems = true;
                    let price = productPrices[product];
                    
                    if (product === 'cp-package') {
                        // Calculate CP Package price based on selected items
                        price = 0;
                        const checkboxes = document.querySelectorAll('#cp-package-items input[type="checkbox"]:checked');
                        checkboxes.forEach(cb => {
                            price += parseInt(cb.dataset.price);
                        });
                    }
                    
                    const itemTotal = price * cart[product];
                    total += itemTotal;
                    
                    summaryHTML += `<div class="summary-item">
                        <span>${getProductName(product)} x ${cart[product]}</span>
                        <span>${itemTotal} ‡∏ö‡∏≤‡∏ó</span>
                    </div>`;
                }
            }

            if (deliveryCost > 0) {
                summaryHTML += `<div class="summary-item">
                    <span>‡∏Ñ‡πà‡∏≤‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</span>
                    <span>${deliveryCost} ‡∏ö‡∏≤‡∏ó</span>
                </div>`;
                total += deliveryCost;
            }

            summaryDiv.innerHTML = summaryHTML;
            finalSummaryDiv.innerHTML = summaryHTML;
            document.getElementById('total-price').textContent = total;
            document.getElementById('final-total').textContent = total;

            // Show/hide summary
            document.getElementById('order-summary').style.display = hasItems ? 'block' : 'none';
            document.getElementById('next-btn').disabled = !hasItems;
        }

        function getProductName(product) {
            const names = {
                'cp-package': 'CP Package',
                'cpset-m1': 'CPSET M1',
                'cpset-w1': 'CPSET W1',
                'dekcom-set': 'Dekcom SET',
                'full-collection': 'Full Collection'
            };
            return names[product];
        }

        function nextStep() {
            if (currentStep === 1) {
                if (validateStep1()) {
                    currentStep = 2;
                    showStep(2);
                }
            } else if (currentStep === 2) {
                if (validateStep2()) {
                    currentStep = 3;
                    showStep(3);
                    updateOrderSummary();
                }
            } else if (currentStep === 3) {
                if (validateStep3()) {
                    submitOrder();
                    currentStep = 4;
                    showStep(4);
                }
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                showStep(currentStep);
            }
        }

        function showStep(step) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show current section
            document.getElementById(`section${step}`).classList.add('active');
            
            // Update progress bar
            document.querySelectorAll('.progress-step').forEach((stepEl, index) => {
                stepEl.classList.remove('active', 'completed');
                if (index + 1 < step) {
                    stepEl.classList.add('completed');
                } else if (index + 1 === step) {
                    stepEl.classList.add('active');
                }
            });
        }

        function validateStep1() {
            let hasItems = false;
            let hasRequiredSizes = true;
            
            for (let product in cart) {
                if (cart[product] > 0) {
                    hasItems = true;
                    
                    // Check if sizes are required and selected
                    if (product === 'dekcom-set') {
                        if (!selectedSizes['dekcom-polo'] || !selectedSizes['dekcom-jacket']) {
                            hasRequiredSizes = false;
                            alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ã‡∏™‡πå‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Dekcom SET');
                            break;
                        }
                    }
                    if (product === 'full-collection') {
                        if (!selectedSizes['full-polo'] || !selectedSizes['full-jacket']) {
                            hasRequiredSizes = false;
                            alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ã‡∏™‡πå‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Full Collection');
                            break;
                        }
                    }
                    if (product === 'cp-package') {
                        const checkboxes = document.querySelectorAll('#cp-package-items input[type="checkbox"]:checked');
                        if (checkboxes.length === 0) {
                            hasRequiredSizes = false;
                            alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö CP Package');
                            break;
                        }
                    }
                }
            }
            
            if (!hasItems) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£');
                return false;
            }
            
            return hasRequiredSizes;
        }

        function validateStep2() {
            if (!deliveryType) {
                document.getElementById('next-btn-2').disabled = true;
                return false;
            }
            
            const email = document.getElementById('email').value;
            const firstname = document.getElementById('firstname').value;
            const lastname = document.getElementById('lastname').value;
            const phone = document.getElementById('phone').value;
            const address = document.getElementById('address').value;
            
            let isValid = true;
            
            // Email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                document.getElementById('email-error').textContent = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á';
                isValid = false;
            } else {
                document.getElementById('email-error').textContent = '';
            }
            
            // Name validation (Thai and English letters only)
            const nameRegex = /^[a-zA-Z‡∏Å-‡πô\s]+$/;
            if (!nameRegex.test(firstname) || firstname.length < 2) {
                document.getElementById('firstname-error').textContent = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£)';
                isValid = false;
            } else {
                document.getElementById('firstname-error').textContent = '';
            }
            
            if (!nameRegex.test(lastname) || lastname.length < 2) {
                document.getElementById('lastname-error').textContent = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£)';
                isValid = false;
            } else {
                document.getElementById('lastname-error').textContent = '';
            }
            
            // Phone validation (Thai phone number format)
            const phoneRegex = /^[0-9]{10}$/;
            if (!phoneRegex.test(phone.replace(/[-\s]/g, ''))) {
                document.getElementById('phone-error').textContent = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå 10 ‡∏´‡∏•‡∏±‡∏Å';
                isValid = false;
            } else {
                document.getElementById('phone-error').textContent = '';
            }
            
            // Address validation for delivery
            if (deliveryType === 'delivery') {
                if (address.length < 10) {
                    document.getElementById('address-error').textContent = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô (‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 10 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£)';
                    isValid = false;
                } else {
                    document.getElementById('address-error').textContent = '';
                }
            }
            
            document.getElementById('next-btn-2').disabled = !isValid;
            return isValid;
        }

        function validateStep3() {
            const slip = document.getElementById('slip').files[0];
            
            if (!slip) {
                document.getElementById('slip-error').textContent = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô';
                return false;
            }
            
            // Validate file type
            const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif'];
            if (!validTypes.includes(slip.type)) {
                document.getElementById('slip-error').textContent = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (JPG, PNG, GIF)';
                return false;
            }
            
            // Validate file size (max 5MB)
            if (slip.size > 5 * 1024 * 1024) {
                document.getElementById('slip-error').textContent = '‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 5MB';
                return false;
            }
            
            document.getElementById('slip-error').textContent = '';
            return true;
        }

        function handleFileUpload(input) {
            const file = input.files[0];
            const uploadArea = document.querySelector('.file-upload');
            const uploadText = document.getElementById('upload-text');
            
            if (file) {
                uploadArea.classList.add('has-file');
                uploadText.innerHTML = `‚úÖ ${file.name}`;
                document.getElementById('next-btn-3').disabled = false;
            } else {
                uploadArea.classList.remove('has-file');
                uploadText.innerHTML = 'üì∑ ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏•‡∏¥‡∏õ';
                document.getElementById('next-btn-3').disabled = true;
            }
        }

        function submitOrder() {
            // Prepare order data
            const orderData = {
                // Order details
                cart: cart,
                selectedSizes: selectedSizes,
                deliveryType: deliveryType,
                deliveryCost: deliveryCost,
                
                // Customer information
                email: document.getElementById('email').value,
                firstname: document.getElementById('firstname').value,
                lastname: document.getElementById('lastname').value,
                phone: document.getElementById('phone').value,
                address: deliveryType === 'delivery' ? document.getElementById('address').value : '',
                
                // Payment
                slip: document.getElementById('slip').files[0],
                
                // Timestamp
                orderDate: new Date().toISOString(),
                
                // Total
                totalAmount: calculateTotal()
            };
            
            
            // Here you would normally send data to Google Forms API
            // For demo purposes, we'll just log it
            console.log('Order submitted:', orderData);
            
            // In a real implementation, you would:
            // 1. Convert the slip image to base64 or upload to cloud storage
            // 2. Send all data to Google Forms using their API
            // 3. Handle the response
            
            // Example Google Forms submission (pseudo-code):
            
            const formData = new FormData();
            formData.append('entry.854046972', JSON.stringify(orderData.cart));
            formData.append('entry.987654321', orderData.email);
            formData.append('entry.1722966208', orderData.firstname);
            formData.append('entry.427969855', orderData.lastname);
            formData.append('entry.549746891', orderData.phone);
            formData.append('entry.1521526612', orderData.address);
            formData.append('entry.827693610', orderData.deliveryType);
            formData.append('entry.380935256', orderData.totalAmount);
            formData.append('entry.1316781910', orderData.slip);
            console.log('Submitting order to Google Forms:', formData);

            fetch('https://docs.google.com/forms/u/0/d/e/1FAIpQLSdW4kspoFBNqLUNMf0JdVKdK0q48wFdMkFfs-gHUuIcZuB1sw/formResponse', {
                method: 'POST',
                body: formData,
                mode: 'no-cors'
            }).then(response => {
                console.log('Order submitted successfully:', response);
            }).catch(error => {
                console.error('Error submitting order:', error);
                alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
            });
            
        }

        function calculateTotal() {
            let total = 0;
            
            for (let product in cart) {
                if (cart[product] > 0) {
                    let price = productPrices[product];
                    
                    if (product === 'cp-package') {
                        price = 0;
                        const checkboxes = document.querySelectorAll('#cp-package-items input[type="checkbox"]:checked');
                        checkboxes.forEach(cb => {
                            price += parseInt(cb.dataset.price);
                        });
                    }
                    
                    total += price * cart[product];
                }
            }
            
            return total + deliveryCost;
        }

        // Add event listeners for real-time validation
        document.addEventListener('DOMContentLoaded', function() {
            // CP Package item selection
            document.addEventListener('change', function(e) {
                if (e.target.type === 'checkbox' && e.target.closest('#cp-package-items')) {
                    updateOrderSummary();
                }
            });
            
            // Form validation on input
            const inputs = ['email', 'firstname', 'lastname', 'phone', 'address'];
            inputs.forEach(inputId => {
                const input = document.getElementById(inputId);
                if (input) {
                    input.addEventListener('input', validateStep2);
                    input.addEventListener('blur', validateStep2);
                }
            });
        });

        // Initialize
        updateOrderSummary();
    </script>
</body>
</html>